var m=Object.defineProperty;var u=(n,t,e)=>t in n?m(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var c=(n,t,e)=>(u(n,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();const a=class{constructor(t,e,o){this.context=t,this.gridX=e,this.gridY=o,this.alive=Math.random()>.5,this.nextAlive=null}draw(){this.context.fillStyle=this.alive?"black":"white",this.context.fillRect(this.gridX*a.width,this.gridY*a.height,a.width,a.height)}};let l=a;c(l,"width",10),c(l,"height",10);const r=class extends EventTarget{constructor(t){super(),this.canvas=document.getElementById(t),this.context=this.canvas.getContext("2d"),this.gameObjects=[],this.createGrid(),this.nGenerations=0}start(){this.animation=window.requestAnimationFrame(()=>this.gameLoop())}stop(){window.cancelAnimationFrame(this.animation),this.animation=null}reset(){this.gameObjects=[],this.createGrid(),this.nGenerations=0}createGrid(){for(let t=0;t<r.numRows;t++)for(let e=0;e<r.numColumns;e++)this.gameObjects.push(new l(this.context,e,t))}isAlive(t,e){return t<0||t>=r.numColumns||e<0||e>=r.numRows?!1:this.gameObjects[this.gridToIndex(t,e)].alive?1:0}gridToIndex(t,e){return t+e*r.numColumns}checkSurrounding(){for(let t=0;t<r.numColumns;t++)for(let e=0;e<r.numRows;e++){let o=this.isAlive(t-1,e-1)+this.isAlive(t,e-1)+this.isAlive(t+1,e-1)+this.isAlive(t-1,e)+this.isAlive(t+1,e)+this.isAlive(t-1,e+1)+this.isAlive(t,e+1)+this.isAlive(t+1,e+1),i=this.gridToIndex(t,e);o==2?this.gameObjects[i].nextAlive=this.gameObjects[i].alive:o==3?this.gameObjects[i].nextAlive=!0:this.gameObjects[i].nextAlive=!1}for(let t=0;t<this.gameObjects.length;t++)this.gameObjects[t].alive=this.gameObjects[t].nextAlive}gameLoop(){this.checkSurrounding(),this.context.clearRect(0,0,this.canvas.width,this.canvas.height);for(let t=0;t<this.gameObjects.length;t++)this.gameObjects[t].draw();this.nGenerations+=1,this.dispatchEvent(new CustomEvent("gen",{detail:this.nGenerations})),setTimeout(()=>{this.animation&&(this.animation=window.requestAnimationFrame(()=>this.gameLoop()))},500)}};let h=r;c(h,"numColumns",75),c(h,"numRows",40);window.onload=()=>{const n=new h("canvas"),t=document.getElementById("start"),e=document.getElementById("reset"),o=document.getElementById("stop"),i=document.getElementById("gen");n.addEventListener("gen",s=>i.innerHTML=s.detail),t.addEventListener("click",()=>n.start()),e.addEventListener("click",()=>n.reset()),o.addEventListener("click",()=>n.stop())};
